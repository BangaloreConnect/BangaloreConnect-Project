<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post New Job - Admin</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap">
    <style>
        .job-form-container {
            max-width: 700px;
            margin: 1.5rem auto;
        }

        .job-form-section {
            background: white;
            border-radius: 14px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.2rem;
            margin-bottom: 1.2rem;
        }

        .form-group textarea {
            min-height: 180px;
            resize: vertical;
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            padding: 14px;
            font-size: 15px;
        }

        .formatting-tips {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 16px;
            margin: 1rem 0;
            font-size: 13px;
        }

        .formatting-tips h4 {
            color: #0369a1;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .formatting-tips ul {
            padding-left: 20px;
            margin: 0;
        }

        .formatting-tips li {
            margin-bottom: 4px;
            color: #475569;
        }

        .preview-area {
            background: #f8fafc;
            border: 1px dashed #cbd5e1;
            border-radius: 8px;
            padding: 16px;
            margin-top: 12px;
            font-size: 14px;
            color: #64748b;
            min-height: 60px;
            display: none;
        }

        .preview-area.show {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Modern Header -->
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <a href="/dashboard" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-arrow-left"></i>
                    </div>
                    <div class="logo-text">
                        <h1>Post New Job</h1>
                        <span>Bangalore Connect Admin</span>
                    </div>
                </a>
                <div class="header-actions">
                    <a href="/dashboard" class="btn btn-outline">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                    <a href="/logout" class="btn btn-danger">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Job Form Section -->
    <div class="container">
        <div class="job-form-container">
            <div class="job-form-section">
                <h1 style="font-size: 1.8rem; margin-bottom: 0.5rem;">Post a New Job Opening</h1>
                <p style="color: var(--gray); margin-bottom: 1.5rem;">Fill in the details below to post a new job opportunity</p>
                
                <!-- Formatting Tips -->
                <div class="formatting-tips">
                    <h4><i class="fas fa-lightbulb"></i> Formatting Tips for Job Description:</h4>
                    <ul>
                        <li>Press <strong>Enter</strong> for new paragraphs</li>
                        <li>Use bullet points with • or - for lists</li>
                        <li>Add line breaks for better readability</li>
                        <li>Format will be preserved exactly as you type</li>
                    </ul>
                </div>
                
                <form action="/post-job" method="POST" id="jobForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Job Role *</label>
                            <input type="text" class="form-control" name="role" 
                                   placeholder="e.g., Software Developer" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Company Name *</label>
                            <input type="text" class="form-control" name="company" 
                                   placeholder="e.g., Google" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Salary (₹ per month) *</label>
                            <input type="number" class="form-control" name="salary" 
                                   placeholder="e.g., 50000" min="0" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Job Type *</label>
                            <select class="form-control" name="type" required>
                                <option value="">Select Job Type</option>
                                <option value="IT">IT / Tech</option>
                                <option value="Non-IT">Non-IT</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Experience Required *</label>
                            <select class="form-control" name="experience" required>
                                <option value="">Select Experience Level</option>
                                <% experienceLevels.forEach(exp => { %>
                                    <option value="<%= exp %>"><%= exp %></option>
                                <% }); %>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Location *</label>
                            <select class="form-control" name="location" required>
                                <option value="">Select Location</option>
                                <% locations.forEach(loc => { %>
                                    <option value="<%= loc %>"><%= loc %></option>
                                <% }); %>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label class="form-label">Apply Link (URL) *</label>
                        <input type="url" class="form-control" name="applyLink" 
                               placeholder="https://company.com/careers/job-id" required>
                    </div>
                    
                    <div class="form-group full-width">
                        <label class="form-label">Job Description *</label>
                        <textarea class="form-control" name="description" id="jobDescription" 
                                  placeholder="Enter detailed job description...
                                  
Responsibilities:
• List responsibilities here
• One per line
• Use bullet points

Requirements:
• Minimum qualifications
• Required skills
• Education requirements

Benefits:
• Competitive salary
• Health insurance
• Flexible hours" 
                                  required></textarea>
                        <div id="previewArea" class="preview-area">
                            <strong>Preview:</strong>
                            <div id="previewContent"></div>
                        </div>
                    </div>
                    
                    <div class="form-checkbox">
                        <input type="checkbox" id="featured" name="featured">
                        <label for="featured">Mark as Featured Job (will appear with special styling)</label>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success btn-lg">
                            <i class="fas fa-paper-plane"></i> Publish Job
                        </button>
                        <a href="/dashboard" class="btn btn-outline" style="border-color: var(--gray-light); color: var(--gray);">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer class="site-footer">
        <div class="container">
            <div class="copyright">
                <span>© 2024 Bangalore Connect Admin Panel</span>
                <span>Session expires in 5 minutes</span>
            </div>
        </div>
    </footer>

    <script>
        // Real-time preview of job description
        const descriptionTextarea = document.getElementById('jobDescription');
        const previewArea = document.getElementById('previewArea');
        const previewContent = document.getElementById('previewContent');
        
        descriptionTextarea.addEventListener('input', function() {
            const text = this.value;
            if (text.trim().length > 0) {
                // Convert newlines to HTML line breaks for preview
                const formattedText = text
                    .replace(/\n/g, '<br>')
                    .replace(/\•/g, '•')
                    .replace(/\*/g, '•');
                
                previewContent.innerHTML = formattedText;
                previewArea.classList.add('show');
            } else {
                previewArea.classList.remove('show');
            }
        });
        
        // Auto-expand textarea
        descriptionTextarea.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
        
        // Set initial height
        descriptionTextarea.style.height = '180px';
        
        // Auto-fill sample description on focus
        descriptionTextarea.addEventListener('focus', function() {
            if (!this.value.trim()) {
                this.value = `Responsibilities:
• 
• 
• 

Requirements:
• 
• 
• 

Benefits:
• 
• 
• `;
                // Trigger input event for preview
                const event = new Event('input');
                this.dispatchEvent(event);
            }
        });
    </script>
    // Add this script to post-job.ejs (before closing </body> tag)

<script>
    // Set current date for job posting
    document.addEventListener('DOMContentLoaded', function() {
        // Format date as "28 Jan 2024"
        const today = new Date();
        const formattedDate = today.toLocaleDateString('en-IN', {
            day: 'numeric',
            month: 'short',
            year: 'numeric'
        });
        
        // You can store this in a hidden field if needed
        // Or the server will automatically use current date
        console.log('Job will be posted with date:', formattedDate);
        
        // Show preview of how date will appear
        const datePreview = document.createElement('div');
        datePreview.innerHTML = `<div style="margin-top: 10px; color: #64748b; font-size: 13px;">
            <i class="far fa-calendar"></i> This job will be posted with date: <strong>${formattedDate}</strong>
        </div>`;
        
        const form = document.querySelector('form');
        form.appendChild(datePreview);
    });
</script>
</body>
</html>